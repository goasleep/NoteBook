IP 首部4个字节

#### IP地址
- A类：7位网络号 24位主机号
- B类：14位网络号 16位主机号
- C类：21位主机号 8位主机号 
- D类：多播地址
- E类：保留使用
- 主机号全为0表示本网络本身。如 192.168.13.0
- 主机号全为1表示本网络的广播地址。如192.168.222.255
- 0.0.0.0 表示本主机
- 255.255.255.255 等效为TCP/IP的广播地址。

#### NAT (网络地址转换 network addresstranslation)
对私有IP和公有IP的转换。从而对外隐藏内部管理的IPizhi
私有网络IP地址
- A类网段：10.0.0.0 ~ 10.255.255.255
- B类网段：172.16.0.0 ~ 172.31.255.255
- C类网段：192.168.0.0 ~ 192.168.255.255

#### 子网划分
解决问题：IP地址空间的利用率低，两级IP不够灵活
划分思路：从主机号借比特作为子网号。三级IP的地址结构为：网络号+子网号+主机号
借用子网掩码来得出子网的网络地址

#### CIDR (无分类域间路路由选择)
特点
1. 消除传统的A、B、C类的子网划分。变为无分类的两级编制。地址结构为：网络前缀 + 主机号
2. 使用“斜线记法”
3. 网络前缀的灵活性好，可以构成超网（路由聚合）
4. 使用最长前缀匹配

#### ARP (地址解析协议)
工作在网络层
作用：将IP地址转换为MAC地址  
解决问题：同一个局域网上的主机或路由的IP地址和硬件地址的映射问题  
工作原理：
假设主机A向主机B发送数据
1. A先在ARP缓存表中查询有无B的IP地址。有到第二步，没有到第三步
2. 有就将硬件地址写入MAC帧
3. 没有就是用MAC地址FF-FF-FF-FF-FF-FF来广播ARP请求分组
4. B响应ARP分组，A收到后写入缓存并修改MAC地址

#### DHCP (动态主机配置协议)
是基于UDP的应用层协议，使用CS模式
作用：给主机动态地分配IP地址

#### ICMP（网络控制报文协议）
是网络层协议  
作用：允许主机或路由器报告差错和异常情况。提高IP数据报交付成功的机会  
报文类型
1. 差错报文
    1. 重点不可达
    2. 源点抑制
    3. 时间超过
    4. 参数问题
    5. 改变路由
2. 询问报文
    1. 回送请求和回答报文
    2. 时间戳请求和回答报文
    3. 掩码地址请求和回答报文
    4. 路由器询问和回答报文
常用应用
1. PING
2. traceroute

### IPv6
IPv4向IPv6过渡
1. 使用双协议栈
2. 使用隧道技术