[TOC]

### 索引的策略

索引的星级

- 一星索引：索引将相关记录放在一起
- 二星索引：索引中的数据顺序和查找中的排序顺序一致
- 三星索引：索引中的列包含查询中需要的全部列

#### 独立的列

如果查询中的列不是独立的，那么MySQL就不会使用索引

#### 前缀索引和索引选择性

索引的选择性：不重复的索引值和数据表的记录总数的壁纸。索引选择性的值越高意味着可以过滤掉更多的行，意味着查询效率更高。

- 使用索引的前缀字符来代替整一个字符串。但是会降低索引选择性
- 如果是BLOB和TEXT数据或者是长字符串，必须定义前缀索引，因为MySQL不允许索引全文
- 最好尽可能使用足够长的前缀来提高索引选择性，不过短的省空间
- MySQL无法使用前缀索引进行ORDER BY 和 GROUP BY 操作 

#### 聚簇索引

聚簇索引是一种数据存储方式。它规定了数据在表中的物理存储顺序。意思是说索引项的顺序和表中记录的物理顺序一致。真实数据的物理顺序只能有一种，因此一张表最多只能穿件一个聚簇索引。

优点：

1. 把相关的数据保存在一起。
2. 数据访问更快。聚簇索引将索引和数据保存在同一个B树当中
3. 使用覆盖索引的查询可以直接使用叶节点的主键值

缺点：

1. 提高了IO密集型应用的性能。但是如果数据全部放在内存当中，访问的顺序就没有那么重要了
2. 插入的速度严重依赖于插入顺序。
3. 更新聚簇索引列的代价很高
4. 基于聚簇索引的表插入新行或者主键被更新导致需要移动行时，可能会产生页分裂的问题。
5. 可能导致全表扫描变慢
6. 二级索引（非聚簇索引）可能比想象的要大
7. 二级索引访问需要两次索引查找

最好避免使用随机的聚簇索引。在使用InnoDB的时候尽可能按主键顺序插入数据，并尽可能使用单调增加的聚簇键的值来插入新行

#### 覆盖索引

覆盖索引：一个索引包含了所有需要查询的字段的值。

优点：

### 扩展

[聚簇索引和非聚簇索引](https://www.cnblogs.com/qlqwjy/p/7770580.html)

[数据库索引原理](https://www.cnblogs.com/aspwebchh/p/6652855.html)